<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLAMES - Destiny Relationship Analyzer</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Particle Background -->
    <div class="particles-container" id="particles"></div>
    
    <!-- Settings Panel -->
    <div class="settings-panel" id="settingsPanel">
        <button class="settings-btn" id="settingsBtn" title="Settings">‚öôÔ∏è</button>
        <div class="settings-dropdown" id="settingsDropdown">
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="soundToggle" checked>
                    <span>Sound Effects</span>
                </label>
            </div>
            <div class="setting-item">
                <button class="history-btn" id="historyBtn">üìú View History</button>
            </div>
        </div>
    </div>

    <!-- Social Navigation Bar -->
    <nav class="social-nav" id="socialNav">
        <div class="nav-item active" id="navHome" title="Home Feed">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">Home</span>
        </div>
        <div class="nav-item" id="navStories" title="FLAMES Stories">
            <span class="nav-icon">üìñ</span>
            <span class="nav-label">Stories</span>
            <span class="stories-badge" id="storiesBadge">3</span>
        </div>
        <div class="nav-item" id="navCalculator" title="New Calculation">
            <span class="nav-icon">‚ûï</span>
            <span class="nav-label">Calculate</span>
        </div>
        <div class="nav-item" id="navLeaderboard" title="Leaderboard">
            <span class="nav-icon">üèÜ</span>
            <span class="nav-label">Trending</span>
        </div>
        <div class="nav-item" id="navProfile" title="My Profile">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">Profile</span>
        </div>
    </nav>

    <!-- User Login/Signup Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-content">
            <button class="close-auth" id="closeAuth">‚úï</button>
            <div class="auth-header">
                <div class="flames-logo-small">
                    <span class="flame-letter-small">F</span>
                    <span class="flame-letter-small">L</span>
                    <span class="flame-letter-small">A</span>
                    <span class="flame-letter-small">M</span>
                    <span class="flame-letter-small">E</span>
                    <span class="flame-letter-small">S</span>
                </div>
                <h2>Join the FLAMES Community</h2>
                <p class="auth-subtitle">Share your destiny with the world</p>
            </div>
            
            <div class="auth-form">
                <div class="auth-tabs">
                    <button class="auth-tab active" id="loginTab">Login</button>
                    <button class="auth-tab" id="signupTab">Sign Up</button>
                </div>
                
                <div class="auth-panel active" id="loginPanel">
                    <input type="text" class="auth-input" id="loginUsername" placeholder="Username">
                    <input type="password" class="auth-input" id="loginPassword" placeholder="Password">
                    <button class="auth-button" id="loginBtn">Login</button>
                </div>
                
                <div class="auth-panel" id="signupPanel">
                    <input type="text" class="auth-input" id="signupUsername" placeholder="Username">
                    <input type="email" class="auth-input" id="signupEmail" placeholder="Email">
                    <input type="password" class="auth-input" id="signupPassword" placeholder="Password">
                    <button class="auth-button" id="signupBtn">Create Account</button>
                </div>
                
                <div class="guest-option">
                    <button class="guest-btn" id="continueAsGuest">Continue as Guest</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Social Feed Screen -->
    <div class="social-screen" id="socialFeedScreen">
        <div class="social-header">
            <h1 class="social-title">FLAMES Social</h1>
            <div class="user-info" id="userInfo">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Guest" alt="Avatar" class="user-avatar" id="userAvatar">
                <span class="username" id="currentUsername">Guest</span>
            </div>
        </div>
        
        <div class="feed-container">
            <!-- Post Creation -->
            <div class="create-post-card">
                <div class="create-post-header">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Guest" alt="Avatar" class="post-avatar" id="createPostAvatar">
                    <input type="text" class="create-post-input" placeholder="Share your FLAMES result..." readonly id="createPostTrigger">
                </div>
            </div>
            
            <!-- Posts Feed -->
            <div class="posts-feed" id="postsFeed">
                <!-- Posts will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- FLAMES Stories Screen -->
    <div class="social-screen" id="storiesScreen">
        <div class="stories-header">
            <button class="back-btn" id="backFromStories">‚Üê</button>
            <h2>FLAMES Stories</h2>
        </div>
        
        <div class="stories-container">
            <div class="add-story-card" id="addStoryBtn">
                <div class="add-story-icon">‚ûï</div>
                <p>Share Your Story</p>
            </div>
            
            <div class="stories-list" id="storiesList">
                <!-- Stories will be dynamically added here -->
            </div>
        </div>
        
        <!-- Story Viewer -->
        <div class="story-viewer" id="storyViewer">
            <div class="story-viewer-header">
                <div class="story-user-info">
                    <img src="" alt="Avatar" class="story-avatar" id="storyAvatar">
                    <div class="story-user-details">
                        <span class="story-username" id="storyUsername"></span>
                        <span class="story-time" id="storyTime"></span>
                    </div>
                </div>
                <button class="close-story" id="closeStory">‚úï</button>
            </div>
            
            <div class="story-content" id="storyContent">
                <!-- Story content -->
            </div>
            
            <div class="story-progress">
                <div class="story-progress-bar" id="storyProgress"></div>
            </div>
        </div>
    </div>

    <!-- Leaderboard Screen -->
    <div class="social-screen" id="leaderboardScreen">
        <div class="social-header">
            <h1 class="social-title">üèÜ Trending Couples</h1>
        </div>
        
        <div class="leaderboard-tabs">
            <button class="leaderboard-tab active" data-tab="compatible">Most Compatible</button>
            <button class="leaderboard-tab" data-tab="popular">Most Popular</button>
            <button class="leaderboard-tab" data-tab="recent">Recent</button>
        </div>
        
        <div class="leaderboard-content" id="leaderboardContent">
            <!-- Leaderboard items will be dynamically added -->
        </div>
    </div>

    <!-- User Profile Screen -->
    <div class="social-screen" id="profileScreen">
        <div class="profile-header-bg"></div>
        
        <div class="profile-content">
            <div class="profile-info-card">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Guest" alt="Avatar" class="profile-avatar" id="profileAvatar">
                <h2 class="profile-username" id="profileUsername">Guest User</h2>
                <p class="profile-bio" id="profileBio">Destiny seeker ‚ú®</p>
                
                <div class="profile-stats">
                    <div class="stat-item">
                        <div class="stat-number" id="profilePosts">0</div>
                        <div class="stat-label">Posts</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="profileFollowers">0</div>
                        <div class="stat-label">Followers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="profileFollowing">0</div>
                        <div class="stat-label">Following</div>
                    </div>
                </div>
                
                <div class="profile-actions">
                    <button class="profile-btn" id="editProfileBtn">Edit Profile</button>
                    <button class="profile-btn secondary" id="logoutBtn">Logout</button>
                </div>
            </div>
            
            <div class="profile-tabs">
                <button class="profile-tab active" data-tab="grid">üìä Results</button>
                <button class="profile-tab" data-tab="list">üìú History</button>
                <button class="profile-tab" data-tab="friends">üë• Friends</button>
            </div>
            
            <div class="profile-grid" id="profileGrid">
                <!-- User's FLAMES results grid -->
            </div>
        </div>
    </div>

    <!-- Friends Modal -->
    <div class="friends-modal" id="friendsModal">
        <div class="friends-content">
            <div class="friends-header">
                <h2>Find Friends</h2>
                <button class="close-friends" id="closeFriends">‚úï</button>
            </div>
            
            <div class="search-friends">
                <input type="text" class="search-input" id="searchFriends" placeholder="Search users...">
            </div>
            
            <div class="friends-tabs">
                <button class="friends-tab active" data-tab="suggestions">Suggestions</button>
                <button class="friends-tab" data-tab="following">Following</button>
                <button class="friends-tab" data-tab="followers">Followers</button>
            </div>
            
            <div class="friends-list" id="friendsList">
                <!-- Friends list will be dynamically added -->
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div class="history-modal" id="historyModal">
        <div class="history-content">
            <div class="history-header">
                <h2>üí´ Calculation History</h2>
                <button class="close-history" id="closeHistory">‚úï</button>
            </div>
            <div class="history-list" id="historyList">
                <p class="no-history">No calculations yet. Start your first destiny reading! ‚ú®</p>
            </div>
            <button class="clear-history-btn" id="clearHistoryBtn">üóëÔ∏è Clear All History</button>
        </div>
    </div>

    <!-- Post Detail Modal (for comments and likes) -->
    <div class="post-modal" id="postModal">
        <div class="post-modal-content">
            <button class="close-post-modal" id="closePostModal">‚úï</button>
            
            <div class="post-modal-layout">
                <div class="post-modal-left">
                    <div class="post-detail-card" id="postDetailContent">
                        <!-- Post content will be loaded here -->
                    </div>
                </div>
                
                <div class="post-modal-right">
                    <div class="comments-header">
                        <h3>Comments</h3>
                        <span class="comments-count" id="commentsCount">0</span>
                    </div>
                    
                    <div class="comments-list" id="commentsList">
                        <!-- Comments will be dynamically added -->
                    </div>
                    
                    <div class="comment-input-container">
                        <input type="text" class="comment-input" id="commentInput" placeholder="Add a comment...">
                        <button class="comment-send-btn" id="commentSendBtn">‚û§</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Post Modal -->
    <div class="share-post-modal" id="sharePostModal">
        <div class="share-post-content">
            <div class="share-post-header">
                <h2>Share Your Result</h2>
                <button class="close-share-post" id="closeSharePost">‚úï</button>
            </div>
            
            <div class="share-preview" id="sharePreview">
                <!-- Result preview will be shown here -->
            </div>
            
            <textarea class="share-caption" id="shareCaption" placeholder="Add a caption... ‚ú®" maxlength="500"></textarea>
            <div class="caption-count"><span id="captionCount">0</span>/500</div>
            
            <div class="share-options">
                <label class="share-option">
                    <input type="checkbox" id="sharePublic" checked>
                    <span>Share to public feed</span>
                </label>
                <label class="share-option">
                    <input type="checkbox" id="shareStory">
                    <span>Add to my story (24h)</span>
                </label>
            </div>
            
            <button class="share-post-btn" id="confirmSharePost">
                <span>üì§ Share Result</span>
            </button>
        </div>
    </div>
    
    <!-- Main Container -->
    <div class="container">
        <!-- Home Screen -->
        <div class="screen active" id="homeScreen">
            <div class="logo-container">
                <div class="flames-logo">
                    <span class="flame-letter">F</span>
                    <span class="flame-letter">L</span>
                    <span class="flame-letter">A</span>
                    <span class="flame-letter">M</span>
                    <span class="flame-letter">E</span>
                    <span class="flame-letter">S</span>
                </div>
                <h1 class="main-title">Destiny Relationship Analyzer</h1>
                <p class="subtitle">Discover your cosmic connection</p>
            </div>

            <div class="input-section">
                <div class="input-group">
                    <div class="input-wrapper">
                        <label for="name1">Your Name</label>
                        <input type="text" id="name1" placeholder="Enter your name..." maxlength="30">
                        <div class="input-glow"></div>
                    </div>
                </div>

                <div class="heart-divider">
                    <div class="heart-icon">üíï</div>
                </div>

                <div class="input-group">
                    <div class="input-wrapper">
                        <label for="name2">Their Name</label>
                        <input type="text" id="name2" placeholder="Enter their name..." maxlength="30">
                        <div class="input-glow"></div>
                    </div>
                </div>

                <button class="play-button" id="calculateBtn">
                    <span class="button-text">Reveal Destiny</span>
                    <div class="button-glow"></div>
                    <div class="button-particles"></div>
                </button>

                <div class="error-message" id="errorMsg"></div>
            </div>
        </div>

        <!-- Calculation Screen -->
        <div class="screen" id="calculationScreen">
            <div class="calculation-content">
                <h2 class="calc-title">üîÆ Destiny Calculation in Progress</h2>
                
                <div class="calc-step" id="step1">
                    <div class="names-comparison">
                        <div class="name-letters" id="name1Letters"></div>
                        <div class="matching-indicator">‚ö°</div>
                        <div class="name-letters" id="name2Letters"></div>
                    </div>
                    <div class="match-counter" id="matchCounter">Matches found: <span>0</span></div>
                </div>

                <div class="calc-step" id="step2">
                    <div class="remaining-letters" id="remainingLetters"></div>
                    <div class="count-display" id="countDisplay">Total Count: <span>0</span></div>
                </div>

                <div class="calc-step" id="step3">
                    <div class="flames-circle" id="flamesCircle">
                        <div class="flames-item" data-letter="F">F</div>
                        <div class="flames-item" data-letter="L">L</div>
                        <div class="flames-item" data-letter="A">A</div>
                        <div class="flames-item" data-letter="M">M</div>
                        <div class="flames-item" data-letter="E">E</div>
                        <div class="flames-item" data-letter="S">S</div>
                    </div>
                    <div class="elimination-info" id="eliminationInfo">
                        Counting: <span id="currentCount">0</span> of <span id="totalCount">0</span>
                    </div>
                </div>

                <div class="calc-step" id="step4">
                    <div class="final-letter-reveal" id="finalLetterReveal">?</div>
                </div>

                <div class="calculation-progress-bar">
                    <div class="calc-progress-fill" id="calcProgressFill"></div>
                    <div class="calc-stage-text" id="calcStageText">Initializing...</div>
                </div>
            </div>
        </div>

        <!-- Loading Screen (Quick Transition) -->
        <div class="screen" id="loadingScreen">
            <div class="loading-content">
                <div class="energy-orb">
                    <div class="orb-inner"></div>
                    <div class="orb-ring"></div>
                    <div class="orb-ring ring-2"></div>
                    <div class="orb-ring ring-3"></div>
                </div>
                <h2 class="loading-title">Finalizing Results...</h2>
                <p class="loading-subtitle" id="loadingText">Preparing Your Destiny...</p>
            </div>
        </div>

        <!-- Result Screen -->
        <div class="screen" id="resultScreen">
            <div class="result-content">
                <div class="result-header">
                    <h2 class="names-display" id="namesDisplay"></h2>
                </div>

                <div class="result-card">
                    <div class="result-icon" id="resultIcon"></div>
                    
                    <div class="result-reveal">
                        <div class="result-label">You Are</div>
                        <h1 class="result-text" id="resultText">LOADING...</h1>
                        <div class="result-glow"></div>
                    </div>

                    <div class="compatibility-bar">
                        <div class="compatibility-label">Compatibility Score</div>
                        <div class="compatibility-track">
                            <div class="compatibility-fill" id="compatibilityFill"></div>
                            <div class="compatibility-percentage" id="compatibilityPercent">0%</div>
                        </div>
                    </div>

                    <div class="result-message">
                        <p class="message-text" id="resultMessage"></p>
                    </div>

                    <div class="result-quote">
                        <div class="quote-icon">"</div>
                        <p class="quote-text" id="resultQuote"></p>
                        <div class="quote-icon">"</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="secondary-button" id="shareBtn">
                        <span>üì∏ Share Result</span>
                    </button>
                    <button class="primary-button" id="restartBtn">
                        <span>üîÑ Try Again</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Screenshot Capture Frame -->
    <div class="screenshot-frame" id="screenshotFrame">
        <div class="screenshot-content" id="screenshotContent">
            <div class="screenshot-header">
                <div class="flames-logo-small">
                    <span class="flame-letter-small">F</span>
                    <span class="flame-letter-small">L</span>
                    <span class="flame-letter-small">A</span>
                    <span class="flame-letter-small">M</span>
                    <span class="flame-letter-small">E</span>
                    <span class="flame-letter-small">S</span>
                </div>
                <div class="screenshot-subtitle">Destiny Relationship Analyzer</div>
            </div>
            
            <div class="screenshot-result-card">
                <div class="screenshot-names" id="screenshotNames"></div>
                <div class="screenshot-icon" id="screenshotIcon"></div>
                <div class="screenshot-result-text" id="screenshotResultText"></div>
                <div class="screenshot-compatibility">
                    <div class="screenshot-comp-label">Compatibility</div>
                    <div class="screenshot-comp-value" id="screenshotCompatibility">0%</div>
                </div>
                <div class="screenshot-message" id="screenshotMessage"></div>
                <div class="screenshot-emoji-trail" id="screenshotEmojiTrail"></div>
            </div>
            
            <div class="screenshot-footer">
                Try it yourself! ‚ú® FLAMES Game
            </div>
        </div>
        
        <!-- Flash Effect -->
        <div class="camera-flash" id="cameraFlash"></div>
    </div>

    <!-- Floating Emojis -->
    <div class="floating-emojis" id="floatingEmojis"></div>

    <script src="script.js"></script>
</body>
</html>
